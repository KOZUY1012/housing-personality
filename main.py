import streamlit as st

st.set_page_config(page_title="자취 유형 테스트", page_icon="🏠")
st.title("🏠 나에게 맞는 자취 유형 테스트")

st.write("당신의 생활 스타일에 따라 알맞은 주거 유형을 추천해드립니다. 아래 질문에 답해보세요!")

# 초기화
if "page" not in st.session_state:
    st.session_state.page = 0
if "scores" not in st.session_state:
    st.session_state.scores = {"독립형": 0, "공유형": 0, "라이프형": 0, "균형형": 0}

# 질문 리스트 및 점수 매핑
questions = [
    ("Q1. 주말에 집에서 보내는 당신의 모습은?", [
        ("A. 집에서 혼자 영화/독서하는 시간이 가장 좋다", "독립형"),
        ("B. 친구들을 집에 초대해 어울리는 게 좋다", "공유형"),
        ("C. 나가서 시간을 보내고, 집은 잠만 자는 곳", "균형형"),
        ("D. 인테리어 꾸미며 나만의 힐링 공간을 만든다", "라이프형")]),

    ("Q2. 다음 중 가장 싫은 것은?", [
        ("A. 룸메이트가 집에 친구를 데려오는 것", "독립형"),
        ("B. 혼자서 매일 밥 먹고 대화 없는 생활", "공유형"),
        ("C. 곰팡이나 방음 안 되는 집", "균형형"),
        ("D. 월세가 너무 비싼 집", "라이프형")]),

    ("Q3. 집에서 가장 중요한 요소는?", [
        ("A. 방음/프라이버시", "독립형"),
        ("B. 교류와 공용 공간", "공유형"),
        ("C. 가성비와 교통 접근성", "균형형"),
        ("D. 인테리어와 분위기", "라이프형")]),

    ("Q4. 월세와 생활비에 대한 당신의 생각은?", [
        ("A. 무조건 싼 게 최고", "독립형"),
        ("B. 적당히 나누면 부담 없다", "공유형"),
        ("C. 비싸도 내가 만족하면 OK", "균형형"),
        ("D. 너무 비싸면 스트레스 받음", "라이프형")]),

    ("Q5. 화장실/부엌 등을 다른 사람과 공유하는 것에 대해", [
        ("A. 절대 싫다, 혼자 쓰고 싶다", "독립형"),
        ("B. 괜찮다, 룰만 잘 지키면 된다", "공유형"),
        ("C. 공동 사용보다 상태/관리 수준이 더 중요하다", "균형형"),
        ("D. 따로 써야 힐링이 된다", "라이프형")]),

    ("Q6. 주말에 집에서 보내는 시간은 얼마나?", [
        ("A. 하루 종일 집에 있는 걸 선호한다", "독립형"),
        ("B. 친구들과 외출하거나 어울리는 시간이 많다", "공유형"),
        ("C. 외출과 휴식을 균형 있게 나누는 편이다", "균형형"),
        ("D. 집에서 감성적인 시간을 보내는 걸 좋아한다", "라이프형")]),

    ("Q7. 집이 당신에게 주는 가장 큰 의미는?", [
        ("A. 혼자만의 안식처", "독립형"),
        ("B. 함께 어울리는 소통의 공간", "공유형"),
        ("C. 효율적인 생활의 기반", "균형형"),
        ("D. 나를 표현할 수 있는 감성 공간", "라이프형")]),

    ("Q8. 좋은 집의 조건을 고른다면?", [
        ("A. 조용하고 나만의 공간 확보", "독립형"),
        ("B. 친구들과 어울릴 수 있는 구조", "공유형"),
        ("C. 교통/편의 시설 가까우면 충분하다", "균형형"),
        ("D. 감성적인 인테리어와 쾌적함", "라이프형")]),

    ("Q9. 자취 초반, 예기치 못한 상황이 생긴다면?", [
        ("A. 혼자 해결할 수 있어야 한다고 생각한다", "독립형"),
        ("B. 누군가와 상의하고 함께 풀어가는 게 좋다", "공유형"),
        ("C. 실용적인 대안을 빠르게 찾을 것 같다", "균형형"),
        ("D. 나를 진정으로 위로해줄 공간이 필요하다 ", "라이프형")]),

    ("Q10. 집에 가장 두고 싶은 물건은?", [
        ("A. 책과 조명", "독립형"),
        ("B. 보드게임", "공유형"),
        ("C. 운동기구", "균형형"),
        ("D. 식물과 무드등", "라이프형")]),
]

# 질문 출력
if st.session_state.page < len(questions):
    question, options = questions[st.session_state.page]
    st.subheader(question)
    choice = st.radio("선택하세요:", [opt[0] for opt in options], key=f"q{st.session_state.page}")

    if st.button("다음 질문"):
        for text, style in options:
            if choice == text:
                st.session_state.scores[style] += 1
                break
        st.session_state.page += 1
        st.rerun()

else:
    st.subheader("🎉 결과 분석")
    result = max(st.session_state.scores, key=st.session_state.scores.get)
    st.write(f"당신에게 가장 잘 맞는 자취 유형은 **{result}**입니다!")
    if result == "독립형":
        st.write("\n**혼자만의 공간이 가장 소중한 당신에게**\n\n**추천 주거 형태:** 고시원, 원룸, 풀옵션 오피스텔 (소형)\n\n**설명:**\n혼자 있는 시간이 많고, 타인과의 공동생활에 스트레스를 느끼는 타입입니다.\n월세 부담이 적은 고시원부터, 방음과 프라이버시가 보장된 풀옵션 원룸까지, 혼자만의 공간을 확보하는 것이 무엇보다 중요합니다.\n공간이 작더라도 나만의 리듬을 지킬 수 있는 주거 환경이 만족도를 크게 좌우합니다.")

    elif result == "공유형":
        st.write("\n**외로움은 싫고, 함께 사는 재미가 좋은 당신에게**\n\n**추천 주거 형태:** 셰어하우스, 투룸 메이트, 기숙사\n\n**설명:**\n혼자 사는 건 외롭고 비효율적이라고 느끼는 사람입니다.\n룸메이트와의 가벼운 대화, 공용 공간의 활기가 스트레스를 줄여주는 스타일이죠.\n셰어하우스는 월세와 공과금을 나누며 살 수 있어 비용 효율도 좋고, 새로운 인연을 만들 수 있는 기회도 많습니다.\n단, 사생활이나 성향 충돌을 피하기 위해 입주 전 룰 체크는 필수입니다.")

    elif result == "라이프형":
        st.write("\n**삶의 질을 가장 중시하는 당신에게**\n\n**추천 주거 형태:** 풀옵션 오피스텔, 신축 원룸, 주상복합\n\n**설명:**\n가격보다 중요한 건 삶의 품질과 쾌적함입니다.\n깔끔한 인테리어, 세련된 분위기, 최신 가전과 시스템에 대한 선호도가 높습니다.\n공간 자체가 힐링이 되기를 원하고, 집에서 보내는 시간이 적더라도 그 품질은 포기하지 않습니다.\n이런 유형은 다소 높은 월세라도 자기 관리와 라이프스타일에 어울리는 주거지를 찾는 경향이 있습니다.")

    elif result == "균형형":
        st.write("\n**현실과 이상 사이에서 합리적인 선택을 하는 당신에게**\n\n**추천 주거 형태:** 반지하/빌라, 올드하지만 넓은 원룸, 다가구주택\n\n**설명:**\n가성비, 거리, 공간 크기, 독립성 등을 두루 고려하는 실용주의자입니다.\n눈에 띄는 인테리어보다는 공간 활용도, 주변 환경, 교통 접근성 등을 꼼꼼히 따져봅니다.\n관리만 잘 된다면 오래된 건물도 상관없고, 약간의 불편함도 합리적인 비용 안에서 수용 가능합니다.\n이런 유형은 발품을 많이 팔수록 좋은 주거 조건을 찾아낼 확률이 높습니다.")


    st.write("점수 분포:")
    st.write(st.session_state.scores)

    st.button("다시 시작하기", on_click=lambda: (st.session_state.clear(), st.rerun()))
    